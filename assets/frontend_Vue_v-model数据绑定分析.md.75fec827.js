import{_ as s,c as n,o as a,a as l}from"./app.02c23f2e.js";const b=JSON.parse('{"title":"v-model\u6570\u636E\u7ED1\u5B9A\u5206\u6790","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u63CF\u8FF0","slug":"\u63CF\u8FF0","link":"#\u63CF\u8FF0","children":[]},{"level":2,"title":"\u5206\u6790","slug":"\u5206\u6790","link":"#\u5206\u6790","children":[]},{"level":2,"title":"\u53C2\u8003","slug":"\u53C2\u8003","link":"#\u53C2\u8003","children":[]}],"relativePath":"frontend/Vue/v-model\u6570\u636E\u7ED1\u5B9A\u5206\u6790.md","lastUpdated":1723944852000}'),p={name:"frontend/Vue/v-model\u6570\u636E\u7ED1\u5B9A\u5206\u6790.md"},e=l(`<h1 id="v-model\u6570\u636E\u7ED1\u5B9A\u5206\u6790" tabindex="-1">v-model\u6570\u636E\u7ED1\u5B9A\u5206\u6790 <a class="header-anchor" href="#v-model\u6570\u636E\u7ED1\u5B9A\u5206\u6790" aria-hidden="true">#</a></h1><p><code>v-model</code>\u662F<code>Vue</code>\u63D0\u4F9B\u7684\u6307\u4EE4\uFF0C\u5176\u4E3B\u8981\u4F5C\u7528\u662F\u53EF\u4EE5\u5B9E\u73B0\u5728\u8868\u5355<code>&lt;input&gt;</code>\u3001<code>&lt;textarea&gt;</code>\u53CA<code>&lt;select&gt;</code>\u7B49\u5143\u7D20\u4EE5\u53CA\u7EC4\u4EF6\u4E0A\u521B\u5EFA\u53CC\u5411\u6570\u636E\u7ED1\u5B9A\uFF0C\u5176\u672C\u8D28\u4E0A\u5C31\u662F\u4E00\u79CD\u8BED\u6CD5\u7CD6\uFF0C\u65E2\u53EF\u4EE5\u76F4\u63A5\u5B9A\u4E49\u5728\u539F\u751F\u8868\u5355\u5143\u7D20\uFF0C\u4E5F\u53EF\u4EE5\u652F\u6301\u81EA\u5B9A\u4E49\u7EC4\u4EF6\u3002\u5728\u7EC4\u4EF6\u7684\u5B9E\u73B0\u4E2D\uFF0C\u53EF\u4EE5\u914D\u7F6E\u5B50\u7EC4\u4EF6\u63A5\u6536\u7684<code>prop</code>\u540D\u79F0\uFF0C\u4EE5\u53CA\u6D3E\u53D1\u7684\u4E8B\u4EF6\u540D\u79F0\u5B9E\u73B0\u7EC4\u4EF6\u5185\u7684<code>v-model</code>\u53CC\u5411\u7ED1\u5B9A\u3002</p><h2 id="\u63CF\u8FF0" tabindex="-1">\u63CF\u8FF0 <a class="header-anchor" href="#\u63CF\u8FF0" aria-hidden="true">#</a></h2><p>\u53EF\u4EE5\u7528<code>v-model</code>\u6307\u4EE4\u5728\u8868\u5355<code>&lt;input&gt;</code>\u3001<code>&lt;textarea&gt;</code>\u53CA<code>&lt;select&gt;</code>\u5143\u7D20\u4E0A\u521B\u5EFA\u53CC\u5411\u6570\u636E\u7ED1\u5B9A\uFF0C\u5176\u4F1A\u6839\u636E\u63A7\u4EF6\u7C7B\u578B\u81EA\u52A8\u9009\u53D6\u6B63\u786E\u7684\u65B9\u6CD5\u6765\u66F4\u65B0\u5143\u7D20\uFF0C\u4EE5<code>&lt;input&gt;</code>\u4F5C\u4E3A\u793A\u4F8B\u4F7F\u7528<code>v-model</code>\u3002</p><div class="language-html line-numbers-mode"><button class="copy"></button><span class="lang">html</span><pre><code><span class="line"><span style="color:#C9D1D9;">&lt;!</span><span style="color:#7EE787;">DOCTYPE</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">html</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">html</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">head</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">title</span><span style="color:#C9D1D9;">&gt;Vue&lt;/</span><span style="color:#7EE787;">title</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">head</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">body</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">div</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;app&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">div</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">body</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">src</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;https://cdn.bootcss.com/vue/2.4.2/vue.js&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;text/javascript&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">var</span><span style="color:#C9D1D9;"> vm </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Vue</span><span style="color:#C9D1D9;">({</span></span>
<span class="line"><span style="color:#C9D1D9;">        el: </span><span style="color:#A5D6FF;">&quot;#app&quot;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">        data: {</span></span>
<span class="line"><span style="color:#C9D1D9;">            msg: </span><span style="color:#A5D6FF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">        },</span></span>
<span class="line"><span style="color:#C9D1D9;">        template: </span><span style="color:#A5D6FF;">\`</span></span>
<span class="line"><span style="color:#A5D6FF;">            &lt;div&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">                &lt;div&gt;Message is: {{ msg }}&lt;/div&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">                &lt;input v-model=&quot;msg&quot;&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">            &lt;/div&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">        \`</span></span>
<span class="line"><span style="color:#C9D1D9;">    })</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">html</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>\u5F53\u4E0D\u4F7F\u7528<code>v-model</code>\u8BED\u6CD5\u7CD6\u65F6\uFF0C\u53EF\u4EE5\u81EA\u884C\u5B9E\u73B0\u4E00\u4E2A\u53CC\u5411\u7ED1\u5B9A\uFF0C\u5B9E\u9645\u4E0A<code>v-model</code>\u5728\u5185\u90E8\u4E3A\u4E0D\u540C\u7684\u8F93\u5165\u5143\u7D20\u4F7F\u7528\u4E0D\u540C\u7684<code>property</code>\u5E76\u629B\u51FA\u4E0D\u540C\u7684\u4E8B\u4EF6\uFF1A</p><ul><li><code>input</code>\u548C<code>textarea</code>\u5143\u7D20\u4F7F\u7528<code>value property</code>\u548C<code>input</code>\u4E8B\u4EF6\u3002</li><li><code>checkbox</code>\u548C<code>radio</code>\u5143\u7D20\u4F7F\u7528<code>checked property</code>\u548C<code>change</code>\u4E8B\u4EF6\u3002</li><li><code>select</code>\u5143\u7D20\u5C06<code>value</code>\u4F5C\u4E3A<code>prop</code>\u5E76\u5C06<code>change</code>\u4F5C\u4E3A\u4E8B\u4EF6\u3002</li></ul><p>\u540C\u6837\u4EE5<code>&lt;input&gt;</code>\u4F5C\u4E3A\u793A\u4F8B\u800C\u4E0D\u4F7F\u7528<code>v-model</code>\u5B9E\u73B0\u53CC\u5411\u7ED1\u5B9A\u3002</p><div class="language-html line-numbers-mode"><button class="copy"></button><span class="lang">html</span><pre><code><span class="line"><span style="color:#C9D1D9;">&lt;!</span><span style="color:#7EE787;">DOCTYPE</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">html</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">html</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">head</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">title</span><span style="color:#C9D1D9;">&gt;Vue&lt;/</span><span style="color:#7EE787;">title</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">head</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">body</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">div</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;app&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">div</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">body</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">src</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;https://cdn.bootcss.com/vue/2.4.2/vue.js&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;text/javascript&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">var</span><span style="color:#C9D1D9;"> vm </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Vue</span><span style="color:#C9D1D9;">({</span></span>
<span class="line"><span style="color:#C9D1D9;">        el: </span><span style="color:#A5D6FF;">&quot;#app&quot;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">        data: {</span></span>
<span class="line"><span style="color:#C9D1D9;">            msg: </span><span style="color:#A5D6FF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">        },</span></span>
<span class="line"><span style="color:#C9D1D9;">        template: </span><span style="color:#A5D6FF;">\`</span></span>
<span class="line"><span style="color:#A5D6FF;">            &lt;div&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">                &lt;div&gt;Message is: {{ msg }}&lt;/div&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">                &lt;input :value=&quot;msg&quot; @input=&quot;msg = $event.target.value&quot;&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">            &lt;/div&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">        \`</span></span>
<span class="line"><span style="color:#C9D1D9;">    })</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">html</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>\u5BF9\u4E8E<code>v-model</code>\u8FD8\u6709\u4FEE\u9970\u7B26\u7528\u4EE5\u63A7\u5236\u7528\u6237\u8F93\u5165\uFF1A</p><ul><li><code>.trim</code>: \u8F93\u5165\u9996\u5C3E\u7A7A\u683C\u8FC7\u6EE4\u3002</li><li><code>.lazy</code>: \u53D6\u4EE3<code>input</code>\u4E8B\u4EF6\u800C\u76D1\u542C<code>change</code>\u4E8B\u4EF6\u3002</li><li><code>.number</code>: \u8F93\u5165\u5B57\u7B26\u4E32\u8F6C\u4E3A\u6709\u6548\u7684\u6570\u5B57\uFF0C\u5982\u679C\u8FD9\u4E2A\u503C\u65E0\u6CD5\u88AB<code>parseFloat()</code>\u89E3\u6790\uFF0C\u5219\u4F1A\u8FD4\u56DE\u539F\u59CB\u7684\u503C\u3002</li></ul><div class="language-html line-numbers-mode"><button class="copy"></button><span class="lang">html</span><pre><code><span class="line"><span style="color:#C9D1D9;">&lt;!</span><span style="color:#7EE787;">DOCTYPE</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">html</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">html</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">head</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">title</span><span style="color:#C9D1D9;">&gt;Vue&lt;/</span><span style="color:#7EE787;">title</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">head</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">body</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">div</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;app&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">div</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">body</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">src</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;https://cdn.bootcss.com/vue/2.4.2/vue.js&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;text/javascript&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">var</span><span style="color:#C9D1D9;"> vm </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Vue</span><span style="color:#C9D1D9;">({</span></span>
<span class="line"><span style="color:#C9D1D9;">        el: </span><span style="color:#A5D6FF;">&quot;#app&quot;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">        data: {</span></span>
<span class="line"><span style="color:#C9D1D9;">            msg: </span><span style="color:#79C0FF;">0</span></span>
<span class="line"><span style="color:#C9D1D9;">        },</span></span>
<span class="line"><span style="color:#C9D1D9;">        template: </span><span style="color:#A5D6FF;">\`</span></span>
<span class="line"><span style="color:#A5D6FF;">            &lt;div&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">                &lt;div&gt;Message is: {{ msg }}&lt;/div&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">                &lt;div&gt;Type is: {{ typeof(msg) }}&lt;/div&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">                &lt;input v-model.number=&quot;msg&quot; type=&quot;number&quot;&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">            &lt;/div&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">        \`</span></span>
<span class="line"><span style="color:#C9D1D9;">    })</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">html</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>\u5F53\u4F7F\u7528\u81EA\u5B9A\u4E49\u7EC4\u4EF6\u65F6\uFF0C\u5728\u7EC4\u4EF6\u4E0A\u7684<code>v-model</code>\u9ED8\u8BA4\u4F1A\u5229\u7528\u540D\u4E3A<code>value</code>\u7684<code>prop</code>\u548C\u540D\u4E3A<code>input</code>\u7684\u4E8B\u4EF6\uFF0C\u4F46\u662F\u50CF\u5355\u9009\u6846\u3001\u590D\u9009\u6846\u7B49\u7C7B\u578B\u7684\u8F93\u5165\u63A7\u4EF6\u53EF\u80FD\u4F1A\u5C06<code>value attribute</code>\u7528\u4E8E\u4E0D\u540C\u7684\u76EE\u7684\uFF0C\u6B64\u65F6\u53EF\u4EE5\u4F7F\u7528<code>model</code>\u9009\u9879\u53EF\u4EE5\u7528\u6765\u907F\u514D\u8FD9\u6837\u7684\u51B2\u7A81\u3002</p><div class="language-html line-numbers-mode"><button class="copy"></button><span class="lang">html</span><pre><code><span class="line"><span style="color:#C9D1D9;">&lt;!</span><span style="color:#7EE787;">DOCTYPE</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">html</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">html</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">head</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">title</span><span style="color:#C9D1D9;">&gt;Vue&lt;/</span><span style="color:#7EE787;">title</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">head</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">body</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    &lt;</span><span style="color:#7EE787;">div</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">id</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;app&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">div</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">body</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">src</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;https://cdn.bootcss.com/vue/2.4.2/vue.js&quot;</span><span style="color:#C9D1D9;">&gt;&lt;/</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;">=</span><span style="color:#A5D6FF;">&quot;text/javascript&quot;</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">    Vue.</span><span style="color:#D2A8FF;">component</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&quot;u-input&quot;</span><span style="color:#C9D1D9;">, {</span></span>
<span class="line"><span style="color:#C9D1D9;">        model: {</span></span>
<span class="line"><span style="color:#C9D1D9;">            prop: </span><span style="color:#A5D6FF;">&quot;message&quot;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">            event: </span><span style="color:#A5D6FF;">&quot;input&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">        },</span></span>
<span class="line"><span style="color:#C9D1D9;">        props: {</span></span>
<span class="line"><span style="color:#C9D1D9;">            message: { </span></span>
<span class="line"><span style="color:#C9D1D9;">                type: String</span></span>
<span class="line"><span style="color:#C9D1D9;">            },</span></span>
<span class="line"><span style="color:#C9D1D9;">        },</span></span>
<span class="line"><span style="color:#C9D1D9;">        template: </span><span style="color:#A5D6FF;">\`</span></span>
<span class="line"><span style="color:#A5D6FF;">            &lt;div&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">                &lt;input :value=&quot;message&quot; @input=&quot;$emit(&#39;input&#39;, $event.target.value)&quot;&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">            &lt;/div&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">        \`</span></span>
<span class="line"><span style="color:#C9D1D9;">    })</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">var</span><span style="color:#C9D1D9;"> vm </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">Vue</span><span style="color:#C9D1D9;">({</span></span>
<span class="line"><span style="color:#C9D1D9;">        el: </span><span style="color:#A5D6FF;">&quot;#app&quot;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">        data: {</span></span>
<span class="line"><span style="color:#C9D1D9;">            msg: </span><span style="color:#A5D6FF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#C9D1D9;">        },</span></span>
<span class="line"><span style="color:#C9D1D9;">        template: </span><span style="color:#A5D6FF;">\`</span></span>
<span class="line"><span style="color:#A5D6FF;">            &lt;div&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">                &lt;div&gt;Message is: {{ msg }}&lt;/div&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">                &lt;u-input v-model=&quot;msg&quot;&gt;&lt;/u-input&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">            &lt;/div&gt;</span></span>
<span class="line"><span style="color:#A5D6FF;">        \`</span></span>
<span class="line"><span style="color:#C9D1D9;">    })</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">script</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"><span style="color:#C9D1D9;">&lt;/</span><span style="color:#7EE787;">html</span><span style="color:#C9D1D9;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h2 id="\u5206\u6790" tabindex="-1">\u5206\u6790 <a class="header-anchor" href="#\u5206\u6790" aria-hidden="true">#</a></h2><p><code>Vue</code>\u6E90\u7801\u7684\u5B9E\u73B0\u6BD4\u8F83\u590D\u6742\uFF0C\u4F1A\u5904\u7406\u5404\u79CD\u517C\u5BB9\u95EE\u9898\u4E0E\u5F02\u5E38\u4EE5\u53CA\u5404\u79CD\u6761\u4EF6\u5206\u652F\uFF0C\u6587\u7AE0\u5206\u6790\u6BD4\u8F83\u6838\u5FC3\u7684\u4EE3\u7801\u90E8\u5206\uFF0C\u7CBE\u7B80\u8FC7\u540E\u7684\u7248\u672C\uFF0C\u91CD\u8981\u90E8\u5206\u505A\u51FA\u6CE8\u91CA\uFF0C<code>commit id</code>\u4E3A<code>ef56410</code>\u3002</p><p><code>v-model</code>\u5C5E\u4E8E<code>Vue</code>\u7684\u6307\u4EE4\uFF0C\u6240\u4EE5\u4ECE\u7F16\u8BD1\u9636\u6BB5\u5F00\u59CB\u5206\u6790\uFF0C\u5728\u89E3\u6790\u5230\u6307\u4EE4\u4E4B\u524D\uFF0C<code>Vue</code>\u7684\u89E3\u6790\u9636\u6BB5\u5927\u81F4\u6D41\u7A0B\uFF1A\u89E3\u6790\u6A21\u7248\u5B57\u7B26\u4E32\u751F\u6210<code>AST</code>\u3001\u4F18\u5316\u8BED\u6CD5\u6811<code>AST</code>\u3001\u751F\u6210<code>render</code>\u5B57\u7B26\u4E32\u3002</p><div class="language-javascript line-numbers-mode"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#8B949E;">// dev/src/compiler/index.js line 11</span></span>
<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">createCompiler</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">createCompilerCreator</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">baseCompile</span><span style="color:#C9D1D9;"> (</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">template</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">string</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">options</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">CompilerOptions</span></span>
<span class="line"><span style="color:#C9D1D9;">)</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">CompiledResult</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">ast</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">parse</span><span style="color:#C9D1D9;">(template.</span><span style="color:#D2A8FF;">trim</span><span style="color:#C9D1D9;">(), options) </span><span style="color:#8B949E;">// \u751F\u6210AST</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (options.optimize </span><span style="color:#FF7B72;">!==</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">optimize</span><span style="color:#C9D1D9;">(ast, options) </span><span style="color:#8B949E;">// \u4F18\u5316AST</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">code</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">generate</span><span style="color:#C9D1D9;">(ast, options) </span><span style="color:#8B949E;">// \u751F\u6210\u4EE3\u7801 \u5373render\u5B57\u7B26\u4E32</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    ast,</span></span>
<span class="line"><span style="color:#C9D1D9;">    render: code.render,</span></span>
<span class="line"><span style="color:#C9D1D9;">    staticRenderFns: code.staticRenderFns</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>\u5BF9\u6307\u4EE4\u7684\u5904\u7406\u5C31\u5728\u751F\u6210<code>render</code>\u5B57\u7B26\u4E32\u7684\u8FC7\u7A0B\uFF0C\u4E5F\u5C31\u662F<code>generate</code>\u51FD\u6570\u7684\u5904\u7406\u8FC7\u7A0B\uFF0C\u5728<code>generate</code>\u4E2D\u8C03\u7528<code>genElement -&gt; genData -&gt; genDirectives</code>\uFF0C\u6587\u7AE0\u4E3B\u8981\u4ECE<code>genDirectives</code>\u51FD\u6570\u8FDB\u884C\u5206\u6790\u3002</p><div class="language-javascript line-numbers-mode"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#8B949E;">// dev/src/compiler/codegen/index.js line 43</span></span>
<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">generate</span><span style="color:#C9D1D9;"> (</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">ast</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">ASTElement</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">|</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">void</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">options</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">CompilerOptions</span></span>
<span class="line"><span style="color:#C9D1D9;">)</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">CodegenResult</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">state</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">CodegenState</span><span style="color:#C9D1D9;">(options)</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">code</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> ast </span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">genElement</span><span style="color:#C9D1D9;">(ast, state) </span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;_c(&quot;div&quot;)&#39;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    render: </span><span style="color:#A5D6FF;">\`with(this){return \${</span><span style="color:#C9D1D9;">code</span><span style="color:#A5D6FF;">}}\`</span><span style="color:#C9D1D9;">, </span><span style="color:#8B949E;">// render\u5B57\u7B26\u4E32</span></span>
<span class="line"><span style="color:#C9D1D9;">    staticRenderFns: state.staticRenderFns</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// dev/src/compiler/codegen/index.js line 55</span></span>
<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">genElement</span><span style="color:#C9D1D9;"> (</span><span style="color:#FFA657;">el</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">ASTElement</span><span style="color:#C9D1D9;">, </span><span style="color:#FFA657;">state</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">CodegenState</span><span style="color:#C9D1D9;">)</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">string</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// ...</span></span>
<span class="line"><span style="color:#C9D1D9;">  data </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">genData</span><span style="color:#C9D1D9;">(el, state)</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// ...</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// dev/src/compiler/codegen/index.js line 219</span></span>
<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">genData</span><span style="color:#C9D1D9;"> (</span><span style="color:#FFA657;">el</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">ASTElement</span><span style="color:#C9D1D9;">, </span><span style="color:#FFA657;">state</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">CodegenState</span><span style="color:#C9D1D9;">)</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">string</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// ...</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">dirs</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">genDirectives</span><span style="color:#C9D1D9;">(el, state)</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// ...</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>\u5728\u751F\u6210<code>AST</code>\u9636\u6BB5\uFF0C\u4E5F\u5C31\u662F<code>parse</code>\u9636\u6BB5\uFF0C<code>v-model</code>\u88AB\u5F53\u505A\u666E\u901A\u7684\u6307\u4EE4\u89E3\u6790\u5230<code>el.directives</code>\u4E2D\uFF0C<code>genDrirectives</code>\u65B9\u6CD5\u5C31\u662F\u904D\u5386<code>el.directives</code>\uFF0C\u7136\u540E\u83B7\u53D6\u6BCF\u4E00\u4E2A\u6307\u4EE4\u5BF9\u5E94\u7684\u65B9\u6CD5\uFF0C\u5BF9\u4E8E<code>v-model</code>\u800C\u8A00\uFF0C\u5728\u6B64\u5904\u83B7\u53D6\u7684\u662F<code>{name: &quot;model&quot;, rawName: &quot;v-model&quot; ...}</code>\uFF0C\u901A\u8FC7<code>state</code>\u627E\u5230<code>model</code>\u6307\u4EE4\u5BF9\u5E94\u7684\u65B9\u6CD5<code>model()</code>\u5E76\u6267\u884C\u8BE5\u65B9\u6CD5\u3002</p><div class="language-javascript line-numbers-mode"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#8B949E;">// dev/src/compiler/codegen/index.js line 309</span></span>
<span class="line"><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">genDirectives</span><span style="color:#C9D1D9;"> (</span><span style="color:#FFA657;">el</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">ASTElement</span><span style="color:#C9D1D9;">, </span><span style="color:#FFA657;">state</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">CodegenState</span><span style="color:#C9D1D9;">)</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">string</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">|</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">void</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">dirs</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> el.directives </span><span style="color:#8B949E;">// \u83B7\u53D6\u6307\u4EE4</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (</span><span style="color:#FF7B72;">!</span><span style="color:#C9D1D9;">dirs) </span><span style="color:#FF7B72;">return</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">let</span><span style="color:#C9D1D9;"> res </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;directives:[&#39;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">let</span><span style="color:#C9D1D9;"> hasRuntime </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">let</span><span style="color:#C9D1D9;"> i, l, dir, needRuntime</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">for</span><span style="color:#C9D1D9;"> (i </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">, l </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> dirs.</span><span style="color:#79C0FF;">length</span><span style="color:#C9D1D9;">; i </span><span style="color:#FF7B72;">&lt;</span><span style="color:#C9D1D9;"> l; i</span><span style="color:#FF7B72;">++</span><span style="color:#C9D1D9;">) { </span><span style="color:#8B949E;">// \u904D\u5386\u6307\u4EE4</span></span>
<span class="line"><span style="color:#C9D1D9;">    dir </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> dirs[i]</span></span>
<span class="line"><span style="color:#C9D1D9;">    needRuntime </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">true</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">gen</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">DirectiveFunction</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> state.directives[dir.name] </span><span style="color:#8B949E;">// \u5BF9\u4E8Ev-model\u6765\u8BF4 const gen = state.directives[&quot;model&quot;];</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (gen) {</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#8B949E;">// compile-time directive that manipulates AST.</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#8B949E;">// returns true if it also needs a runtime counterpart.</span></span>
<span class="line"><span style="color:#C9D1D9;">      needRuntime </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">!!</span><span style="color:#D2A8FF;">gen</span><span style="color:#C9D1D9;">(el, dir, state.warn)</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (needRuntime) {</span></span>
<span class="line"><span style="color:#C9D1D9;">      hasRuntime </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">true</span></span>
<span class="line"><span style="color:#C9D1D9;">      res </span><span style="color:#FF7B72;">+=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">\`{name:&quot;\${</span><span style="color:#C9D1D9;">dir</span><span style="color:#A5D6FF;">.</span><span style="color:#C9D1D9;">name</span><span style="color:#A5D6FF;">}&quot;,rawName:&quot;\${</span><span style="color:#C9D1D9;">dir</span><span style="color:#A5D6FF;">.</span><span style="color:#C9D1D9;">rawName</span><span style="color:#A5D6FF;">}&quot;\${</span></span>
<span class="line"><span style="color:#A5D6FF;">        </span><span style="color:#C9D1D9;">dir</span><span style="color:#A5D6FF;">.</span><span style="color:#C9D1D9;">value</span><span style="color:#A5D6FF;"> </span><span style="color:#FF7B72;">?</span><span style="color:#A5D6FF;"> </span><span style="color:#A5D6FF;">\`,value:(\${</span><span style="color:#C9D1D9;">dir</span><span style="color:#A5D6FF;">.</span><span style="color:#C9D1D9;">value</span><span style="color:#A5D6FF;">}),expression:\${</span><span style="color:#79C0FF;">JSON</span><span style="color:#A5D6FF;">.</span><span style="color:#D2A8FF;">stringify</span><span style="color:#A5D6FF;">(</span><span style="color:#C9D1D9;">dir</span><span style="color:#A5D6FF;">.</span><span style="color:#C9D1D9;">value</span><span style="color:#A5D6FF;">)</span><span style="color:#A5D6FF;">}\`</span><span style="color:#A5D6FF;"> </span><span style="color:#FF7B72;">:</span><span style="color:#A5D6FF;"> </span><span style="color:#A5D6FF;">&#39;&#39;</span></span>
<span class="line"><span style="color:#A5D6FF;">      </span><span style="color:#A5D6FF;">}\${</span></span>
<span class="line"><span style="color:#A5D6FF;">        </span><span style="color:#C9D1D9;">dir</span><span style="color:#A5D6FF;">.</span><span style="color:#C9D1D9;">arg</span><span style="color:#A5D6FF;"> </span><span style="color:#FF7B72;">?</span><span style="color:#A5D6FF;"> </span><span style="color:#A5D6FF;">\`,arg:\${</span><span style="color:#C9D1D9;">dir</span><span style="color:#A5D6FF;">.</span><span style="color:#C9D1D9;">isDynamicArg</span><span style="color:#A5D6FF;"> </span><span style="color:#FF7B72;">?</span><span style="color:#A5D6FF;"> </span><span style="color:#C9D1D9;">dir</span><span style="color:#A5D6FF;">.</span><span style="color:#C9D1D9;">arg</span><span style="color:#A5D6FF;"> </span><span style="color:#FF7B72;">:</span><span style="color:#A5D6FF;"> </span><span style="color:#A5D6FF;">\`&quot;\${</span><span style="color:#C9D1D9;">dir</span><span style="color:#A5D6FF;">.</span><span style="color:#C9D1D9;">arg</span><span style="color:#A5D6FF;">}&quot;\`}\`</span><span style="color:#A5D6FF;"> </span><span style="color:#FF7B72;">:</span><span style="color:#A5D6FF;"> </span><span style="color:#A5D6FF;">&#39;&#39;</span></span>
<span class="line"><span style="color:#A5D6FF;">      </span><span style="color:#A5D6FF;">}\${</span></span>
<span class="line"><span style="color:#A5D6FF;">        </span><span style="color:#C9D1D9;">dir</span><span style="color:#A5D6FF;">.</span><span style="color:#C9D1D9;">modifiers</span><span style="color:#A5D6FF;"> </span><span style="color:#FF7B72;">?</span><span style="color:#A5D6FF;"> </span><span style="color:#A5D6FF;">\`,modifiers:\${</span><span style="color:#79C0FF;">JSON</span><span style="color:#A5D6FF;">.</span><span style="color:#D2A8FF;">stringify</span><span style="color:#A5D6FF;">(</span><span style="color:#C9D1D9;">dir</span><span style="color:#A5D6FF;">.</span><span style="color:#C9D1D9;">modifiers</span><span style="color:#A5D6FF;">)</span><span style="color:#A5D6FF;">}\`</span><span style="color:#A5D6FF;"> </span><span style="color:#FF7B72;">:</span><span style="color:#A5D6FF;"> </span><span style="color:#A5D6FF;">&#39;&#39;</span></span>
<span class="line"><span style="color:#A5D6FF;">      </span><span style="color:#A5D6FF;">}},\`</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (hasRuntime) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> res.</span><span style="color:#D2A8FF;">slice</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">, </span><span style="color:#FF7B72;">-</span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">) </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;]&#39;</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p><code>model</code>\u65B9\u6CD5\u4E3B\u8981\u662F\u6839\u636E\u4F20\u5165\u7684\u53C2\u6570\u5BF9<code>tag</code>\u7684\u7C7B\u578B\u8FDB\u884C\u5224\u65AD\uFF0C\u8C03\u7528\u4E0D\u540C\u7684\u5904\u7406\u903B\u8F91\u3002</p><div class="language-javascript line-numbers-mode"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#8B949E;">// dev/src/platforms/web/compiler/directives/model.js line 14</span></span>
<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">default</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">function</span><span style="color:#FFA657;"> </span><span style="color:#D2A8FF;">model</span><span style="color:#FFA657;"> (</span></span>
<span class="line"><span style="color:#FFA657;">  el</span><span style="color:#FF7B72;">:</span><span style="color:#FFA657;"> ASTElement,</span></span>
<span class="line"><span style="color:#FFA657;">  dir</span><span style="color:#FF7B72;">:</span><span style="color:#FFA657;"> ASTDirective,</span></span>
<span class="line"><span style="color:#FFA657;">  </span><span style="color:#D2A8FF;">_warn</span><span style="color:#FF7B72;">:</span><span style="color:#FFA657;"> Function</span></span>
<span class="line"><span style="color:#FFA657;">)</span><span style="color:#FF7B72;">:</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">?</span><span style="color:#79C0FF;">boolean</span><span style="color:#FFA657;"> </span><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">  warn </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> _warn</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> dir.value</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">modifiers</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> dir.modifiers</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">tag</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> el.tag</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> el.attrsMap.type</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (p<wbr>rocess.env.</span><span style="color:#79C0FF;">NODE_ENV</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">!==</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;production&#39;</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// inputs with type=&quot;file&quot; are read only and setting the input&#39;s</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// value will throw an error.</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (tag </span><span style="color:#FF7B72;">===</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;input&#39;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">&amp;&amp;</span><span style="color:#C9D1D9;"> type </span><span style="color:#FF7B72;">===</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;file&#39;</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#D2A8FF;">warn</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#A5D6FF;">\`&lt;\${</span><span style="color:#C9D1D9;">el</span><span style="color:#A5D6FF;">.</span><span style="color:#C9D1D9;">tag</span><span style="color:#A5D6FF;">} v-model=&quot;\${</span><span style="color:#C9D1D9;">value</span><span style="color:#A5D6FF;">}&quot; type=&quot;file&quot;&gt;:</span><span style="color:#79C0FF;">\\n</span><span style="color:#A5D6FF;">\`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#A5D6FF;">\`File inputs are read only. Use a v-on:change listener instead.\`</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">        el.rawAttrsMap[</span><span style="color:#A5D6FF;">&#39;v-model&#39;</span><span style="color:#C9D1D9;">]</span></span>
<span class="line"><span style="color:#C9D1D9;">      )</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// \u5206\u652F\u5904\u7406</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (el.component) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">genComponentModel</span><span style="color:#C9D1D9;">(el, value, modifiers)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// component v-model doesn&#39;t need extra runtime</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span></span>
<span class="line"><span style="color:#C9D1D9;">  } </span><span style="color:#FF7B72;">else</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (tag </span><span style="color:#FF7B72;">===</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;select&#39;</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">genSelect</span><span style="color:#C9D1D9;">(el, value, modifiers)</span></span>
<span class="line"><span style="color:#C9D1D9;">  } </span><span style="color:#FF7B72;">else</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (tag </span><span style="color:#FF7B72;">===</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;input&#39;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">&amp;&amp;</span><span style="color:#C9D1D9;"> type </span><span style="color:#FF7B72;">===</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;checkbox&#39;</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">genCheckboxModel</span><span style="color:#C9D1D9;">(el, value, modifiers)</span></span>
<span class="line"><span style="color:#C9D1D9;">  } </span><span style="color:#FF7B72;">else</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (tag </span><span style="color:#FF7B72;">===</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;input&#39;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">&amp;&amp;</span><span style="color:#C9D1D9;"> type </span><span style="color:#FF7B72;">===</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;radio&#39;</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">genRadioModel</span><span style="color:#C9D1D9;">(el, value, modifiers)</span></span>
<span class="line"><span style="color:#C9D1D9;">  } </span><span style="color:#FF7B72;">else</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (tag </span><span style="color:#FF7B72;">===</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;input&#39;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">||</span><span style="color:#C9D1D9;"> tag </span><span style="color:#FF7B72;">===</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;textarea&#39;</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">genDefaultModel</span><span style="color:#C9D1D9;">(el, value, modifiers)</span></span>
<span class="line"><span style="color:#C9D1D9;">  } </span><span style="color:#FF7B72;">else</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (</span><span style="color:#FF7B72;">!</span><span style="color:#C9D1D9;">config.</span><span style="color:#D2A8FF;">isReservedTag</span><span style="color:#C9D1D9;">(tag)) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">genComponentModel</span><span style="color:#C9D1D9;">(el, value, modifiers)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// component v-model doesn&#39;t need extra runtime</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span></span>
<span class="line"><span style="color:#C9D1D9;">  } </span><span style="color:#FF7B72;">else</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (p<wbr>rocess.env.</span><span style="color:#79C0FF;">NODE_ENV</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">!==</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;production&#39;</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">warn</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#A5D6FF;">\`&lt;\${</span><span style="color:#C9D1D9;">el</span><span style="color:#A5D6FF;">.</span><span style="color:#C9D1D9;">tag</span><span style="color:#A5D6FF;">} v-model=&quot;\${</span><span style="color:#C9D1D9;">value</span><span style="color:#A5D6FF;">}&quot;&gt;: \`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#A5D6FF;">\`v-model is not supported on this element type. \`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#A5D6FF;">&#39;If you are working with contenteditable, it</span><span style="color:#79C0FF;">\\&#39;</span><span style="color:#A5D6FF;">s recommended to &#39;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#A5D6FF;">&#39;wrap a library dedicated for that purpose inside a custom component.&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">      el.rawAttrsMap[</span><span style="color:#A5D6FF;">&#39;v-model&#39;</span><span style="color:#C9D1D9;">]</span></span>
<span class="line"><span style="color:#C9D1D9;">    )</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// ensure runtime directive metadata</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">true</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><p><code>genDefaultModel</code>\u51FD\u6570\u5148\u5904\u7406\u4E86<code>modifiers</code>\u4FEE\u9970\u7B26\uFF0C\u5176\u4E0D\u540C\u4E3B\u8981\u5F71\u54CD\u7684\u662F<code>event</code>\u548C<code>valueExpression</code>\u7684\u503C\uFF0C\u5BF9\u4E8E<code>&lt;input&gt;</code>\u6807\u7B7E<code>event</code>\u4E3A<code>input</code>\uFF0C<code>valueExpression</code>\u4E3A<code>$event.target.value</code>\uFF0C\u7136\u540E\u53BB\u6267\u884C<code>genAssignmentCode</code>\u53BB\u751F\u6210\u4EE3\u7801\uFF0C\u4EE5\u53CA\u6DFB\u52A0\u5C5E\u6027\u503C\u4E0E\u4E8B\u4EF6\u5904\u7406\u3002</p><div class="language-javascript line-numbers-mode"><button class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#8B949E;">// dev/src/platforms/web/compiler/directives/model.js line 127</span></span>
<span class="line"><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">genDefaultModel</span><span style="color:#C9D1D9;"> (</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">el</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">ASTElement</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">value</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">string</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">modifiers</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">?</span><span style="color:#FFA657;">ASTModifiers</span></span>
<span class="line"><span style="color:#C9D1D9;">)</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">?</span><span style="color:#79C0FF;">boolean</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">type</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> el.attrsMap.type</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// warn if v-bind:value conflicts with v-model</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// except for inputs with v-bind:type</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// value\u4E0Ev-model\u51B2\u7A81\u5219\u53D1\u51FA\u8B66\u544A</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (p<wbr>rocess.env.</span><span style="color:#79C0FF;">NODE_ENV</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">!==</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;production&#39;</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">value</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> el.attrsMap[</span><span style="color:#A5D6FF;">&#39;v-bind:value&#39;</span><span style="color:#C9D1D9;">] </span><span style="color:#FF7B72;">||</span><span style="color:#C9D1D9;"> el.attrsMap[</span><span style="color:#A5D6FF;">&#39;:value&#39;</span><span style="color:#C9D1D9;">]</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">typeBinding</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> el.attrsMap[</span><span style="color:#A5D6FF;">&#39;v-bind:type&#39;</span><span style="color:#C9D1D9;">] </span><span style="color:#FF7B72;">||</span><span style="color:#C9D1D9;"> el.attrsMap[</span><span style="color:#A5D6FF;">&#39;:type&#39;</span><span style="color:#C9D1D9;">]</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (value </span><span style="color:#FF7B72;">&amp;&amp;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">!</span><span style="color:#C9D1D9;">typeBinding) {</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">binding</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> el.attrsMap[</span><span style="color:#A5D6FF;">&#39;v-bind:value&#39;</span><span style="color:#C9D1D9;">] </span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;v-bind:value&#39;</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;:value&#39;</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#D2A8FF;">warn</span><span style="color:#C9D1D9;">(</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#A5D6FF;">\`\${</span><span style="color:#C9D1D9;">binding</span><span style="color:#A5D6FF;">}=&quot;\${</span><span style="color:#C9D1D9;">value</span><span style="color:#A5D6FF;">}&quot; conflicts with v-model on the same element \`</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#A5D6FF;">&#39;because the latter already expands to a value binding internally&#39;</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">        el.rawAttrsMap[binding]</span></span>
<span class="line"><span style="color:#C9D1D9;">      )</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">// \u4FEE\u9970\u7B26\u5904\u7406</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> { </span><span style="color:#79C0FF;">lazy</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">number</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">trim</span><span style="color:#C9D1D9;"> } </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> modifiers </span><span style="color:#FF7B72;">||</span><span style="color:#C9D1D9;"> {}</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">needCompositionGuard</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">!</span><span style="color:#C9D1D9;">lazy </span><span style="color:#FF7B72;">&amp;&amp;</span><span style="color:#C9D1D9;"> type </span><span style="color:#FF7B72;">!==</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;range&#39;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">event</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> lazy</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;change&#39;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> type </span><span style="color:#FF7B72;">===</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;range&#39;</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#FF7B72;">?</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">RANGE_TOKEN</span></span>
<span class="line"><span style="color:#C9D1D9;">      </span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;input&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">let</span><span style="color:#C9D1D9;"> valueExpression </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;$event.target.value&#39;</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (trim) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    valueExpression </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">\`$event.target.value.trim()\`</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (number) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    valueExpression </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">\`_n(\${</span><span style="color:#C9D1D9;">valueExpression</span><span style="color:#A5D6FF;">})\`</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">let</span><span style="color:#C9D1D9;"> code </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">genAssignmentCode</span><span style="color:#C9D1D9;">(value, valueExpression)</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (needCompositionGuard) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    code </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">\`if($event.target.composing)return;\${</span><span style="color:#C9D1D9;">code</span><span style="color:#A5D6FF;">}\`</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#D2A8FF;">addProp</span><span style="color:#C9D1D9;">(el, </span><span style="color:#A5D6FF;">&#39;value&#39;</span><span style="color:#C9D1D9;">, </span><span style="color:#A5D6FF;">\`(\${</span><span style="color:#C9D1D9;">value</span><span style="color:#A5D6FF;">})\`</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#D2A8FF;">addHandler</span><span style="color:#C9D1D9;">(el, event, code, </span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">true</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (trim </span><span style="color:#FF7B72;">||</span><span style="color:#C9D1D9;"> number) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#D2A8FF;">addHandler</span><span style="color:#C9D1D9;">(el, </span><span style="color:#A5D6FF;">&#39;blur&#39;</span><span style="color:#C9D1D9;">, </span><span style="color:#A5D6FF;">&#39;$forceUpdate()&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8B949E;">// dev/src/compiler/directives/model.js line 36</span></span>
<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">genAssignmentCode</span><span style="color:#C9D1D9;"> (</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">value</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">string</span><span style="color:#C9D1D9;">,</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">assignment</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">string</span></span>
<span class="line"><span style="color:#C9D1D9;">)</span><span style="color:#FF7B72;">:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">string</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">res</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">parseModel</span><span style="color:#C9D1D9;">(value)</span></span>
<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (res.key </span><span style="color:#FF7B72;">===</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">null</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">\`\${</span><span style="color:#C9D1D9;">value</span><span style="color:#A5D6FF;">}=\${</span><span style="color:#C9D1D9;">assignment</span><span style="color:#A5D6FF;">}\`</span></span>
<span class="line"><span style="color:#C9D1D9;">  } </span><span style="color:#FF7B72;">else</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">\`$set(\${</span><span style="color:#C9D1D9;">res</span><span style="color:#A5D6FF;">.</span><span style="color:#C9D1D9;">exp</span><span style="color:#A5D6FF;">}, \${</span><span style="color:#C9D1D9;">res</span><span style="color:#A5D6FF;">.</span><span style="color:#C9D1D9;">key</span><span style="color:#A5D6FF;">}, \${</span><span style="color:#C9D1D9;">assignment</span><span style="color:#A5D6FF;">})\`</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><h2 id="\u53C2\u8003" tabindex="-1">\u53C2\u8003 <a class="header-anchor" href="#\u53C2\u8003" aria-hidden="true">#</a></h2><div class="language- line-numbers-mode"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#c9d1d9;">https://cn.vuejs.org/v2/api/#v-model</span></span>
<span class="line"><span style="color:#c9d1d9;">https://www.jianshu.com/p/19bb4912c62a</span></span>
<span class="line"><span style="color:#c9d1d9;">https://www.jianshu.com/p/0d089f770ab2</span></span>
<span class="line"><span style="color:#c9d1d9;">https://cn.vuejs.org/v2/guide/forms.html</span></span>
<span class="line"><span style="color:#c9d1d9;">https://juejin.im/post/6844903784963899400</span></span>
<span class="line"><span style="color:#c9d1d9;">https://juejin.im/post/6844903999414485005</span></span>
<span class="line"><span style="color:#c9d1d9;">https://segmentfault.com/a/1190000021516035</span></span>
<span class="line"><span style="color:#c9d1d9;">https://segmentfault.com/a/1190000015848976</span></span>
<span class="line"><span style="color:#c9d1d9;">https://github.com/haizlin/fe-interview/issues/560</span></span>
<span class="line"><span style="color:#c9d1d9;">https://ustbhuangyi.github.io/vue-analysis/v2/extend/v-model.html</span></span>
<span class="line"><span style="color:#c9d1d9;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>`,28),o=[e];function c(r,t,D,y,i,F){return a(),n("div",null,o)}const u=s(p,[["render",c]]);export{b as __pageData,u as default};
